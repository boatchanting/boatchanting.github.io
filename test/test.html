<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>德语背单词 · Fluent</title>
  <link rel="stylesheet" href="test.css" />
</head>
<body>
  <div class="bg"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="18" height="18">
          <path d="M4 5.5C4 4.12 5.12 3 6.5 3H20v16.5c0 .83-.67 1.5-1.5 1.5H6.5C5.12 21 4 19.88 4 18.5V5.5Z" fill="currentColor" opacity=".18"/>
          <path d="M6.5 4.5H18.5v14H6.5a2 2 0 0 0 0 4H20" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
          <path d="M7.5 8h9M7.5 11h8M7.5 14h6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
        </svg>
      </div>
      <div>
        <div class="brandTitle">德语背单词</div>
        <div class="brandSub">静态 HTML · Windows 11 UI</div>
      </div>
    </div>

    <div class="topActions">
      <div class="comboPill" title="连击">
        <span class="dot"></span>
        连击 <b id="combo">0</b>
      </div>

      <button class="btn ghost" id="btnExport">
        导出数据
      </button>

      <label class="btn ghost">
        导入数据
        <input id="importFile" type="file" accept="application/json" hidden />
      </label>

      <button class="btn ghost" id="btnTheme" title="切换黑/白主题">切换主题</button>


      <button class="btn" id="btnStart">开始学习</button>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar card">
      <div class="cardHeader">
        <div class="cardTitle">词库与设置</div>
        <div class="cardHint">支持多单元选择、排序、错题练习、统计与进度存储</div>
      </div>

      <div class="form">
        <div class="field">
          <label>词库</label>
          <select id="dictionarySelect"></select>
          <div class="help" id="dictMeta"></div>
        </div>

        <div class="field">
          <label>单元（可多选）</label>
          <div class="unitActions">
            <button class="btn tiny ghost" id="unitAll">全选</button>
            <button class="btn tiny ghost" id="unitNone">全不选</button>
          </div>
          <div class="unitList" id="unitList"></div>
          <div class="help" id="unitMeta"></div>
        </div>

        <div class="field grid2">
          <div>
            <label>排序</label>
            <select id="sortMode">
              <option value="forward">正序（文件顺序）</option>
              <option value="reverse">倒序</option>
              <option value="shuffle">乱序</option>
              <option value="alphaAsc">按字母顺序</option>
              <option value="alphaDesc">按字母倒序</option>
            </select>
          </div>
          <div>
            <label>出题选项数</label>
            <select id="choiceCount">
              <option>4</option><option>5</option><option>6</option><option>7</option><option>8</option>
            </select>
          </div>
        </div>

        <div class="field">
          <label>练习范围</label>
          <select id="practiceScope">
            <option value="all">全部</option>
            <option value="wrongAll">错题练习（历史错题）</option>
            <option value="wrongToday">错题练习（仅今天）</option>
            <option value="newOnly">只练未练过（attempt=0）</option>
          </select>
          <div class="help">“错题”根据你的错误次数统计自动生成。</div>
        </div>

        <div class="field">
          <label>模式</label>
          <div class="seg" role="tablist" aria-label="mode">
            <button class="segBtn" data-mode="mc_meaning2word">意思选词</button>
            <button class="segBtn" data-mode="mc_word2meaning">词选意思</button>
            <button class="segBtn" data-mode="spell">默写/隐藏</button>
          </div>
        </div>

        <div class="field" id="spellOptions" style="display:none;">
          <label>默写提示</label>
          <select id="spellHint">
            <option value="full">全拼默写（不提示）</option>
            <option value="hideVowels">隐藏元音提示</option>
            <option value="hideConsonants">隐藏辅音提示</option>
            <option value="randomHide">随机隐藏提示</option>
          </select>
          <div class="help">默写：题干显示“释义”，你输入完整单词；隐藏模式会在上方给你一个遮罩提示。</div>
        </div>

        <div class="field">
          <label>快捷键</label>
          <div class="help">
            数字键 1-8 选项；Enter 提交/下一题；Esc 结束本轮
          </div>
        </div>

        <div class="divider"></div>

        <div class="field">
          <label>数据管理</label>
          <div class="row">
            <button class="btn ghost" id="btnResetSession">清空本轮</button>
            <button class="btn danger" id="btnWipeAll">清空全部数据</button>
          </div>
          <div class="help">全部数据包括：每词练习次数（按天/汇总）、错误次数（按天/汇总）、设置与进度。</div>
        </div>
      </div>
    </aside>

    <section class="content">
      <div class="card trainer">
        <div class="trainerTop">
          <div class="progress">
            <div class="progressTitle" id="progressTitle">未开始</div>
            <div class="progressSub" id="progressSub">请选择词库与单元，然后点击“开始学习”。</div>
          </div>
          <div class="statsMini">
            <div class="statBox">
              <div class="k">今日练习</div>
              <div class="v" id="todayAttempts">0</div>
            </div>
            <div class="statBox">
              <div class="k">今日错误</div>
              <div class="v" id="todayWrong">0</div>
            </div>
            <div class="statBox">
              <div class="k">总练习</div>
              <div class="v" id="totalAttempts">0</div>
            </div>
            <div class="statBox">
              <div class="k">总错误</div>
              <div class="v" id="totalWrong">0</div>
            </div>
          </div>
        </div>

        <div class="trainerBody">
          <div class="questionCard" id="questionCard">
            <div class="qMeta">
              <span class="pill" id="unitPill">—</span>
              <span class="pill" id="indexPill">—</span>
              <span class="pill subtle" id="scopePill">—</span>
            </div>

            <div class="qMain">
              <div class="qTitle" id="qTitle">准备就绪</div>
              <div class="qHint" id="qHint">选择模式并开始学习。</div>
            </div>

            <div class="answerArea" id="answerArea">
              <!-- multiple choice buttons or spelling input -->
            </div>

            <div class="feedback" id="feedback" aria-live="polite"></div>

            <div class="trainerActions">
              <button class="btn ghost" id="btnSkip">跳过</button>
              <button class="btn" id="btnNext" disabled>下一题</button>
            </div>
          </div>

          <div class="card tips">
            <div class="cardHeader">
              <div class="cardTitle">本词统计</div>
              <div class="cardHint">按天与汇总都会记录；正确会自动下一题，错误需手动点“下一题”。</div>
            </div>
            <div class="tipsGrid">
              <div class="tipItem">
                <div class="k">该词总练习</div>
                <div class="v" id="wordAttempts">0</div>
              </div>
              <div class="tipItem">
                <div class="k">该词总错误</div>
                <div class="v" id="wordWrong">0</div>
              </div>
              <div class="tipItem">
                <div class="k">今天练习</div>
                <div class="v" id="wordTodayAttempts">0</div>
              </div>
              <div class="tipItem">
                <div class="k">今天错误</div>
                <div class="v" id="wordTodayWrong">0</div>
              </div>
            </div>

            <div class="divider"></div>

            <div class="small">
              <div><b>提示：</b>若你希望默写更“严格”，可以把词条写成你想要输入的标准形式（例如包含冠词/复数标记等）。</div>
              <div class="muted">数据存储：localStorage（可导出/导入）。</div>
            </div>
          </div>
        </div>
      </div>

      <footer class="footer muted">
        Made with pure HTML/CSS/JS · Fluent-ish UI · Offline friendly
      </footer>
    </section>
  </main>

  <div class="toast" id="toast"></div>

  <script type="module" src="test.js"></script>
</body>
</html>
